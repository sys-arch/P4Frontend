<div class="pagina-fondo">
  <div class="calendario-contenedor">
    <!-- Columna Izquierda -->
    <div class="calendario-columna columna-izquierda">
      <!-- Cabecera del calendario -->
      <div class="calendario-header">
        <div class="cambio-mes">
          <button class="boton-cambio" (click)="cambiarPeriodo('anterior')">&lt;</button>
          <div class="calendario-nombre-mes">
            {{ nombreMes }}
          </div>
          <button class="boton-cambio" (click)="cambiarPeriodo('siguiente')">&gt;</button>
        </div>
        <div class="dropdown">
          <button class="dropdown-btn">{{ vista === 'mes' ? 'Mes' : 'Semana' }}</button>
          <div class="dropdown-content">
            <button (click)="filtrarPorMes()">Mes</button>
            <button (click)="filtrarPorSemana()">Semana</button>
          </div>
        </div>
      </div>

      <!-- Días de la semana -->
      <div class="calendario-grid calendario-header-dias">
        <div class="calendario-header-dia">Lun</div>
        <div class="calendario-header-dia">Mar</div>
        <div class="calendario-header-dia">Mié</div>
        <div class="calendario-header-dia">Jue</div>
        <div class="calendario-header-dia">Vie</div>
        <div class="calendario-header-dia">Sáb</div>
        <div class="calendario-header-dia">Dom</div>
      </div>

      <!-- Calendario Vista Mensual -->
      <div *ngIf="vista === 'mes'" class="calendario-grid calendario-dias" 
           [ngStyle]="{ '--semanas-del-mes': semanasDelMes }">
        <div
          *ngFor="let dia of diasFiltrados"
          [ngClass]="{'calendario-dia': dia, 'calendario-dia-vacio': !dia}">
          <div *ngIf="dia" class="calendario-dia-numero">{{ dia?.getDate() }}</div>
          <div *ngIf="dia" class="calendario-reuniones">
            <ng-container *ngFor="let hora of horas">
              <div
                *ngIf="obtenerClaseReunion(dia, hora)"
                class="reunion-item"
                [ngStyle]="{'background-color': getColor(obtenerClaseReunion(dia, hora)?.clase)}">
                {{ obtenerClaseReunion(dia, hora)?.asunto }}
              </div>
            </ng-container>
          </div>
        </div>
      </div>

      <!-- Calendario Vista Semanal -->
      <div *ngIf="vista === 'semana'" class="semana-vista">
        <div class="horas-column">
          <div *ngFor="let hora of horas" class="hora-item">{{ hora }}</div>
        </div>
        <div class="calendario-semana-grid">
          <div
            *ngFor="let dia of diasFiltrados"
            [ngClass]="{'calendario-dia-semana': dia, 'calendario-dia-vacio': !dia}">
            <div *ngIf="dia" class="calendario-dia-numero">{{ dia?.getDate() }}</div>
            <div class="calendario-horas">
              <div *ngFor="let hora of horas" class="hora-slot">
                <div
                  *ngIf="dia && obtenerClaseReunion(dia, hora)"
                  class="reunion-item"
                  [ngStyle]="{'background-color': getColor(obtenerClaseReunion(dia, hora)?.clase)}">
                  <span>{{ obtenerClaseReunion(dia, hora)?.asunto || 'Sin asunto' }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Columna Derecha -->
     
    <div class="calendario-columna columna-derecha">
      <button class="btn-crear-reunion" (click)="crearReunion0()">+ Crear Reunión</button>
      <!-- Componente aceptar/rechazar invitaciones a reuniones -->
      <app-buzon-reuniones></app-buzon-reuniones>
      <div class="leyenda">
        <div class="leyenda-item">
          <span class="leyenda-circulo organizador"></span> Organizador
        </div>
        <div class="leyenda-item">
          <span class="leyenda-circulo asistente"></span> Asistente
        </div>
      </div>
    </div>
  </div>
</div>