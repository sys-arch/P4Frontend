<app-header></app-header>

<div *ngIf="showNewPWModal" class="modal-overlay">
  <div class="modal delete-modal">
    <h3>¿Reestablecer contraseña?</h3>
    <p class="warning-text">Al pulsar confirmar, se mandará un correo al email del usuario con un link para reestablecer la contraseña</p>
    <div class="modal-actions">
      <button class="confirm-btn" (click)="confirmNewP()">
        Confirmar
      </button>
      <button class="cancel-btn" (click)="cancel()">Cancelar</button>
    </div>
  </div>
</div>

<div class="perfil-container">
  <div class="profile-info">
    <h2>{{ isAdmin ? 'Editar Cuenta de Usuario' : 'Cambiar Contraseña' }}</h2>

    <div class="profile-picture">
      <img [src]="profilePicture || 'assets/UsuarioSinFoto.png'" alt="Profile Image" class="profile-img" />
    </div>

    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
<<<<<<< Updated upstream
      <div class="info-fields" *ngIf="isAdmin">
=======
      
>>>>>>> Stashed changes
        <div class="textbox">
          <input type="text" id="nombre" formControlName="nombre" required placeholder=" ">
          <label for="nombre">Nombre*</label>
        </div>

        <div class="textbox">
          <input type="text" id="apellidos" formControlName="apellidos" required placeholder=" ">
          <label for="apellidos">Apellidos*</label>
        </div>

        <div class="textbox">
          <input type="email" id="correo" formControlName="correo" required placeholder=" ">
          <label for="correo">Correo*</label>
        </div>

<<<<<<< Updated upstream
        <div class="textbox">
=======
        <!-- Campos específicos para el administrador -->
        <div class="textbox" *ngIf="isAdmin">
          <input type="text" id="centroTrabajo" formControlName="centroTrabajo" required placeholder=" ">
          <label for="centroTrabajo">Centro de Trabajo*</label>
        </div>

        <div class="checkbox-container" *ngIf="isAdmin">
          <span class="checkbox-text-left">Marcar usuario como administrador interno</span>
          <label class="container" for="interno">
              <input type="checkbox" id="interno" name="interno" aria-labelledby="interno-label" />
              <div class="checkmark"></div>
          </label>
          <span id="interno-label" class="sr-only">Marcar usuario como administrador interno</span>
      </div>

        <!-- Campos específicos para el usuario regular -->
        <div class="textbox" *ngIf="!isAdmin">
          <input type="text" id="centroTrabajo" formControlName="centroTrabajo" required placeholder=" ">
          <label for="centroTrabajo">Centro de Trabajo*</label>
        </div>

        <div class="textbox" *ngIf="!isAdmin">
>>>>>>> Stashed changes
          <input type="text" id="departamento" formControlName="departamento" placeholder=" ">
          <label for="departamento">Departamento</label>
        </div>

        <div class="textbox">
          <input type="text" id="centroTrabajo" formControlName="centroTrabajo" required placeholder=" ">
          <label for="centroTrabajo">Centro de Trabajo*</label>
        </div>

        <div class="textbox">
          <input type="date" id="alta" formControlName="alta" required placeholder=" ">
          <label for="alta">Fecha de Alta*</label>
        </div>

        <div class="textbox">
          <input type="text" id="perfil" formControlName="perfil" placeholder=" ">
          <label for="perfil">Perfil</label>
        </div>
<<<<<<< Updated upstream
        <button class="btnred" (click)="showNewModal()">Reestablecer Contraseña</button>
      </div>
=======

        <!-- Botón para reestablecer contraseña visible solo si el perfil en edición es el propio -->
        <button *ngIf="user.email === loggedUserEmail" class="btnred" (click)="showNewModal()">Reestablecer
          Contraseña</button>
      
>>>>>>> Stashed changes

      
      

      <p class="required-info">Los campos(*) son obligatorios.</p>
      <button class="btn" type="submit">Guardar Cambios</button>
    </form>

    <div class="back-button-container">
      <button class="back-button" (click)="navigateToUserList()">Volver</button>
    </div>
  </div>
  <app-footer></app-footer>
</div>
